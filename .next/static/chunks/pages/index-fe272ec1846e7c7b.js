(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2603)}])},9873:function(e,t,n){"use strict";var s=n(5893),r=n(5675),a=n.n(r),l=n(1163),i=n(7294),c=n(1699);let o=e=>{let{userId:t,isLarge:n,hasBorder:r}=e,o=(0,l.useRouter)(),{data:u}=(0,c.Z)(t),d=(0,i.useCallback)(e=>{e.stopPropagation(),o.push("/users/".concat(t))},[o,t]);return(0,s.jsx)("div",{className:"\n        ".concat(r?"border-4 border-black":"","\n        ").concat(n?"h-32":"h-12","\n        ").concat(n?"w-32":"w-12","\n        rounded-full \n        hover:opacity-90 \n        transition \n        cursor-pointer\n        relative\n      "),children:(0,s.jsx)(a(),{fill:!0,style:{objectFit:"cover",borderRadius:"100%"},alt:"Avatar",onClick:d,src:(null==u?void 0:u.profileImage)||"/images/placeholder.png"})})};t.Z=o},8726:function(e,t,n){"use strict";var s=n(5893);let r=e=>{let{label:t,secondary:n,fullWidth:r,onClick:a,large:l,disabled:i,outline:c}=e;return(0,s.jsx)("button",{disabled:i,onClick:a,className:"\n        disabled:opacity-70\n        disabled:cursor-not-allowed\n        rounded-full\n        font-semibold\n        hover:opacity-80\n        transition\n        border-2\n        ".concat(r?"w-full":"w-fit","\n        ").concat(n?"bg-white":"bg-sky-500","\n        ").concat(n?"text-black":"text-white","\n        ").concat(n?"border-black":"border-sky-500","\n        ").concat(l?"text-xl":"text-md","\n        ").concat(l?"px-5":"px-4","\n        ").concat(l?"py-3":"py-2","\n        ").concat(c?"bg-transparent":"","\n        ").concat(c?"border-white":"","\n        ").concat(c?"text-white":"","\n      "),children:t})};t.Z=r},2899:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var s=n(5893),r=n(6154),a=n(7294),l=n(6501),i=n(1524),c=n(4529);let o=(0,c.Ue)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})}));var u=n(1954),d=n(2402),p=n(4217),x=n(9873),h=n(8726);let m=e=>{let{placeholder:t,isComment:n,postId:c}=e,m=o(),f=(0,i.Z)(),{data:v}=(0,u.Z)(),{mutate:b}=(0,d.Z)(),{mutate:j}=(0,p.Z)(c),[Z,w]=(0,a.useState)(""),[g,k]=(0,a.useState)(!1),N=(0,a.useCallback)(async()=>{try{k(!0),await r.Z.post(n?"/api/comments?postId=".concat(c):"/api/posts",{body:Z}),l.Am.success("Tweet created"),w(""),b(),j()}catch(e){l.Am.error("Something went wrong")}finally{k(!1)}},[Z,b,n,c,j]);return(0,s.jsx)("div",{className:"border-b-[1px] border-neutral-800 px-5 py-2",children:v?(0,s.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(x.Z,{userId:null==v?void 0:v.id})}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("textarea",{disabled:g,onChange:e=>w(e.target.value),value:Z,className:" disabled:opacity-80 peer resize-none  mt-3  w-full  bg-black  ring-0  outline-none  text-[20px]  placeholder-neutral-500  text-white ",placeholder:t}),(0,s.jsx)("hr",{className:" opacity-0  peer-focus:opacity-100  h-[1px]  w-full  border-neutral-800  transition"}),(0,s.jsx)("div",{className:"mt-4 flex flex-row justify-end",children:(0,s.jsx)(h.Z,{disabled:g||!Z,onClick:N,label:"Tweet"})})]})]}):(0,s.jsxs)("div",{className:"py-8",children:[(0,s.jsx)("h1",{className:"text-white text-2xl text-center mb-4 font-bold",children:"Welcome to Twitter"}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[(0,s.jsx)(h.Z,{label:"Login",onClick:f.onOpen}),(0,s.jsx)(h.Z,{label:"Register",onClick:m.onOpen,secondary:!0})]})]})})};var f=m},9852:function(e,t,n){"use strict";var s=n(5893),r=n(1163),a=n(7294),l=n(7516);let i=e=>{let{showBackArrow:t,label:n}=e,i=(0,r.useRouter)(),c=(0,a.useCallback)(()=>{i.back()},[i]);return(0,s.jsx)("div",{className:"border-b-[1px] border-neutral-800 p-5",children:(0,s.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[t&&(0,s.jsx)(l.YiX,{onClick:c,color:"white",size:20,className:" cursor-pointer  hover:opacity-70  transition "}),(0,s.jsx)("h1",{className:"text-white text-xl font-semibold",children:n})]})})};t.Z=i},7406:function(e,t,n){"use strict";var s=n(5893),r=n(2402),a=n(9410);let l=e=>{let{userId:t}=e,{data:n=[]}=(0,r.Z)(t);return(0,s.jsx)(s.Fragment,{children:n.map(e=>(0,s.jsx)(a.Z,{userId:t,data:e},e.id))})};t.Z=l},9410:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var s=n(5893),r=n(1163),a=n(7294),l=n(8193),i=n(6422),c=n(1524),o=n(1954),u=n(6154),d=n(6501),p=n(4217),x=n(2402);let h=e=>{let{postId:t,userId:n}=e,{data:s}=(0,o.Z)(),{data:r,mutate:l}=(0,p.Z)(t),{mutate:i}=(0,x.Z)(n),h=(0,c.Z)(),m=(0,a.useMemo)(()=>{let e=(null==r?void 0:r.likedIds)||[];return e.includes(null==s?void 0:s.id)},[r,s]),f=(0,a.useCallback)(async()=>{if(!s)return h.onOpen();try{await (m?()=>u.Z.delete("/api/like",{data:{postId:t}}):()=>u.Z.post("/api/like",{postId:t}))(),l(),i(),d.Am.success("Success")}catch(e){d.Am.error("Something went wrong")}},[s,m,t,i,l,h]);return{hasLiked:m,toggleLike:f}};var m=n(9873);let f=e=>{var t;let{data:n={},userId:u}=e,d=(0,r.useRouter)(),p=(0,c.Z)(),{data:x}=(0,o.Z)(),{hasLiked:f,toggleLike:v}=h({postId:n.id,userId:u}),b=(0,a.useCallback)(e=>{e.stopPropagation(),d.push("/users/".concat(n.user.id))},[d,n.user.id]),j=(0,a.useCallback)(()=>{d.push("/posts/".concat(n.id))},[d,n.id]),Z=(0,a.useCallback)(async e=>{if(e.stopPropagation(),!x)return p.onOpen();v()},[p,x,v]),w=f?l.M_L:l.lo,g=(0,a.useMemo)(()=>(null==n?void 0:n.createdAt)?(0,i.Z)(new Date(n.createdAt)):null,[n.createdAt]);return(0,s.jsx)("div",{onClick:j,className:" border-b-[1px]  border-neutral-800  p-5  cursor-pointer  hover:bg-neutral-900  transition ",children:(0,s.jsxs)("div",{className:"flex flex-row items-start gap-3",children:[(0,s.jsx)(m.Z,{userId:n.user.id}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,s.jsx)("p",{onClick:b,className:" text-white  font-semibold  cursor-pointer  hover:underline ",children:n.user.name}),(0,s.jsxs)("span",{onClick:b,className:" text-neutral-500 cursor-pointer hover:underline hidden md:block ",children:["@",n.user.username]}),(0,s.jsx)("span",{className:"text-neutral-500 text-sm",children:g})]}),(0,s.jsx)("div",{className:"text-white mt-1",children:n.body}),(0,s.jsxs)("div",{className:"flex flex-row items-center mt-3 gap-10",children:[(0,s.jsxs)("div",{className:" flex  flex-row  items-center  text-neutral-500  gap-2  cursor-pointer  transition  hover:text-sky-500 ",children:[(0,s.jsx)(l.e$J,{size:20}),(0,s.jsx)("p",{children:(null===(t=n.comments)||void 0===t?void 0:t.length)||0})]}),(0,s.jsxs)("div",{onClick:Z,className:" flex  flex-row  items-center  text-neutral-500  gap-2  cursor-pointer  transition  hover:text-red-500 ",children:[(0,s.jsx)(w,{color:f?"red":"",size:20}),(0,s.jsx)("p",{children:n.likedIds.length})]})]})]})]})})};var v=f},1954:function(e,t,n){"use strict";var s=n(9734),r=n(8698);let a=()=>{let{data:e,error:t,isLoading:n,mutate:a}=(0,s.ZP)("/api/current",r.Z);return{data:e,error:t,isLoading:n,mutate:a}};t.Z=a},1524:function(e,t,n){"use strict";var s=n(4529);let r=(0,s.Ue)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})}));t.Z=r},4217:function(e,t,n){"use strict";var s=n(9734),r=n(8698);let a=e=>{let{data:t,error:n,isLoading:a,mutate:l}=(0,s.ZP)(e?"/api/posts/".concat(e):null,r.Z);return{data:t,error:n,isLoading:a,mutate:l}};t.Z=a},2402:function(e,t,n){"use strict";var s=n(9734),r=n(8698);let a=e=>{let{data:t,error:n,isLoading:a,mutate:l}=(0,s.ZP)(e?"/api/posts?userId=".concat(e):"/api/posts",r.Z);return{data:t,error:n,isLoading:a,mutate:l}};t.Z=a},1699:function(e,t,n){"use strict";var s=n(9734),r=n(8698);let a=e=>{let{data:t,error:n,isLoading:a,mutate:l}=(0,s.ZP)(e?"/api/users/".concat(e):null,r.Z);return{data:t,error:n,isLoading:a,mutate:l}};t.Z=a},8698:function(e,t,n){"use strict";var s=n(6154);let r=e=>s.Z.get(e).then(e=>e.data);t.Z=r},2603:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var s=n(5893),r=n(7406),a=n(9852),l=n(2899);function i(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Z,{label:"Home"}),(0,s.jsx)(l.Z,{placeholder:"What's happening?"}),(0,s.jsx)(r.Z,{})]})}}},function(e){e.O(0,[874,617,456,861,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);
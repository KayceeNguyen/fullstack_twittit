(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[347],{9508:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/[userId]",function(){return s(5749)}])},9873:function(e,t,s){"use strict";var l=s(5893),n=s(5675),r=s.n(n),a=s(1163),i=s(7294),c=s(1699);let o=e=>{let{userId:t,isLarge:s,hasBorder:n}=e,o=(0,a.useRouter)(),{data:d}=(0,c.Z)(t),u=(0,i.useCallback)(e=>{e.stopPropagation(),o.push("/users/".concat(t))},[o,t]);return(0,l.jsx)("div",{className:"\n        ".concat(n?"border-4 border-black":"","\n        ").concat(s?"h-32":"h-12","\n        ").concat(s?"w-32":"w-12","\n        rounded-full \n        hover:opacity-90 \n        transition \n        cursor-pointer\n        relative\n      "),children:(0,l.jsx)(r(),{fill:!0,style:{objectFit:"cover",borderRadius:"100%"},alt:"Avatar",onClick:u,src:(null==d?void 0:d.profileImage)||"/images/placeholder.png"})})};t.Z=o},8726:function(e,t,s){"use strict";var l=s(5893);let n=e=>{let{label:t,secondary:s,fullWidth:n,onClick:r,large:a,disabled:i,outline:c}=e;return(0,l.jsx)("button",{disabled:i,onClick:r,className:"\n        disabled:opacity-70\n        disabled:cursor-not-allowed\n        rounded-full\n        font-semibold\n        hover:opacity-80\n        transition\n        border-2\n        ".concat(n?"w-full":"w-fit","\n        ").concat(s?"bg-white":"bg-sky-500","\n        ").concat(s?"text-black":"text-white","\n        ").concat(s?"border-black":"border-sky-500","\n        ").concat(a?"text-xl":"text-md","\n        ").concat(a?"px-5":"px-4","\n        ").concat(a?"py-3":"py-2","\n        ").concat(c?"bg-transparent":"","\n        ").concat(c?"border-white":"","\n        ").concat(c?"text-white":"","\n      "),children:t})};t.Z=n},9852:function(e,t,s){"use strict";var l=s(5893),n=s(1163),r=s(7294),a=s(7516);let i=e=>{let{showBackArrow:t,label:s}=e,i=(0,n.useRouter)(),c=(0,r.useCallback)(()=>{i.back()},[i]);return(0,l.jsx)("div",{className:"border-b-[1px] border-neutral-800 p-5",children:(0,l.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[t&&(0,l.jsx)(a.YiX,{onClick:c,color:"white",size:20,className:" cursor-pointer  hover:opacity-70  transition "}),(0,l.jsx)("h1",{className:"text-white text-xl font-semibold",children:s})]})})};t.Z=i},7406:function(e,t,s){"use strict";var l=s(5893),n=s(2402),r=s(9410);let a=e=>{let{userId:t}=e,{data:s=[]}=(0,n.Z)(t);return(0,l.jsx)(l.Fragment,{children:s.map(e=>(0,l.jsx)(r.Z,{userId:t,data:e},e.id))})};t.Z=a},9410:function(e,t,s){"use strict";s.d(t,{Z:function(){return f}});var l=s(5893),n=s(1163),r=s(7294),a=s(8193),i=s(6422),c=s(1524),o=s(1954),d=s(6154),u=s(6501),x=s(4217),p=s(2402);let m=e=>{let{postId:t,userId:s}=e,{data:l}=(0,o.Z)(),{data:n,mutate:a}=(0,x.Z)(t),{mutate:i}=(0,p.Z)(s),m=(0,c.Z)(),h=(0,r.useMemo)(()=>{let e=(null==n?void 0:n.likedIds)||[];return e.includes(null==l?void 0:l.id)},[n,l]),v=(0,r.useCallback)(async()=>{if(!l)return m.onOpen();try{await (h?()=>d.Z.delete("/api/like",{data:{postId:t}}):()=>d.Z.post("/api/like",{postId:t}))(),a(),i(),u.Am.success("Success")}catch(e){u.Am.error("Something went wrong")}},[l,h,t,i,a,m]);return{hasLiked:h,toggleLike:v}};var h=s(9873);let v=e=>{var t;let{data:s={},userId:d}=e,u=(0,n.useRouter)(),x=(0,c.Z)(),{data:p}=(0,o.Z)(),{hasLiked:v,toggleLike:f}=m({postId:s.id,userId:d}),j=(0,r.useCallback)(e=>{e.stopPropagation(),u.push("/users/".concat(s.user.id))},[u,s.user.id]),b=(0,r.useCallback)(()=>{u.push("/posts/".concat(s.id))},[u,s.id]),w=(0,r.useCallback)(async e=>{if(e.stopPropagation(),!p)return x.onOpen();f()},[x,p,f]),Z=v?a.M_L:a.lo,N=(0,r.useMemo)(()=>(null==s?void 0:s.createdAt)?(0,i.Z)(new Date(s.createdAt)):null,[s.createdAt]);return(0,l.jsx)("div",{onClick:b,className:" border-b-[1px]  border-neutral-800  p-5  cursor-pointer  hover:bg-neutral-900  transition ",children:(0,l.jsxs)("div",{className:"flex flex-row items-start gap-3",children:[(0,l.jsx)(h.Z,{userId:s.user.id}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,l.jsx)("p",{onClick:j,className:" text-white  font-semibold  cursor-pointer  hover:underline ",children:s.user.name}),(0,l.jsxs)("span",{onClick:j,className:" text-neutral-500 cursor-pointer hover:underline hidden md:block ",children:["@",s.user.username]}),(0,l.jsx)("span",{className:"text-neutral-500 text-sm",children:N})]}),(0,l.jsx)("div",{className:"text-white mt-1",children:s.body}),(0,l.jsxs)("div",{className:"flex flex-row items-center mt-3 gap-10",children:[(0,l.jsxs)("div",{className:" flex  flex-row  items-center  text-neutral-500  gap-2  cursor-pointer  transition  hover:text-sky-500 ",children:[(0,l.jsx)(a.e$J,{size:20}),(0,l.jsx)("p",{children:(null===(t=s.comments)||void 0===t?void 0:t.length)||0})]}),(0,l.jsxs)("div",{onClick:w,className:" flex  flex-row  items-center  text-neutral-500  gap-2  cursor-pointer  transition  hover:text-red-500 ",children:[(0,l.jsx)(Z,{color:v?"red":"",size:20}),(0,l.jsx)("p",{children:s.likedIds.length})]})]})]})]})})};var f=v},1954:function(e,t,s){"use strict";var l=s(9734),n=s(8698);let r=()=>{let{data:e,error:t,isLoading:s,mutate:r}=(0,l.ZP)("/api/current",n.Z);return{data:e,error:t,isLoading:s,mutate:r}};t.Z=r},1524:function(e,t,s){"use strict";var l=s(4529);let n=(0,l.Ue)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})}));t.Z=n},4217:function(e,t,s){"use strict";var l=s(9734),n=s(8698);let r=e=>{let{data:t,error:s,isLoading:r,mutate:a}=(0,l.ZP)(e?"/api/posts/".concat(e):null,n.Z);return{data:t,error:s,isLoading:r,mutate:a}};t.Z=r},2402:function(e,t,s){"use strict";var l=s(9734),n=s(8698);let r=e=>{let{data:t,error:s,isLoading:r,mutate:a}=(0,l.ZP)(e?"/api/posts?userId=".concat(e):"/api/posts",n.Z);return{data:t,error:s,isLoading:r,mutate:a}};t.Z=r},1699:function(e,t,s){"use strict";var l=s(9734),n=s(8698);let r=e=>{let{data:t,error:s,isLoading:r,mutate:a}=(0,l.ZP)(e?"/api/users/".concat(e):null,n.Z);return{data:t,error:s,isLoading:r,mutate:a}};t.Z=r},8698:function(e,t,s){"use strict";var l=s(6154);let n=e=>l.Z.get(e).then(e=>e.data);t.Z=n},5749:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var l=s(5893),n=s(1163),r=s(373),a=s(1699),i=s(7406),c=s(9852),o=s(7294),d=s(7516),u=s(1510),x=s(1954),p=s(6154),m=s(6501),h=s(1524);let v=e=>{let{data:t,mutate:s}=(0,x.Z)(),{mutate:l}=(0,a.Z)(e),n=(0,h.Z)(),r=(0,o.useMemo)(()=>{let s=(null==t?void 0:t.followingIds)||[];return s.includes(e)},[t,e]),i=(0,o.useCallback)(async()=>{if(!t)return n.onOpen();try{await (r?()=>p.Z.delete("/api/follow",{data:{userId:e}}):()=>p.Z.post("/api/follow",{userId:e}))(),s(),l(),m.Am.success("Success")}catch(e){m.Am.error("Something went wrong")}},[t,r,e,s,l,n]);return{isFollowing:r,toggleFollow:i}};var f=s(4529);let j=(0,f.Ue)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})}));var b=s(8726);let w=e=>{var t;let{userId:s}=e,{data:n}=(0,x.Z)(),{data:r}=(0,a.Z)(s),i=j(),{isFollowing:c,toggleFollow:p}=v(s),m=(0,o.useMemo)(()=>(null==r?void 0:r.createdAt)?(0,u.Z)(new Date(r.createdAt),"MMMM yyyy"):null,[null==r?void 0:r.createdAt]);return(0,l.jsxs)("div",{className:"border-b-[1px] border-neutral-800 pb-4",children:[(0,l.jsx)("div",{className:"flex justify-end p-2",children:(null==n?void 0:n.id)===s?(0,l.jsx)(b.Z,{secondary:!0,label:"Edit",onClick:i.onOpen}):(0,l.jsx)(b.Z,{onClick:p,label:c?"Unfollow":"Follow",secondary:!c,outline:c})}),(0,l.jsxs)("div",{className:"mt-8 px-4",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("p",{className:"text-white text-2xl font-semibold",children:null==r?void 0:r.name}),(0,l.jsxs)("p",{className:"text-md text-neutral-500",children:["@",null==r?void 0:r.username]})]}),(0,l.jsxs)("div",{className:"flex flex-col mt-4",children:[(0,l.jsx)("p",{className:"text-white",children:null==r?void 0:r.bio}),(0,l.jsxs)("div",{className:" flex  flex-row  items-center  gap-2  mt-4  text-neutral-500 ",children:[(0,l.jsx)(d.R1q,{size:24}),(0,l.jsxs)("p",{children:["Joined ",m]})]})]}),(0,l.jsxs)("div",{className:"flex flex-row items-center mt-4 gap-6",children:[(0,l.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,l.jsx)("p",{className:"text-white",children:null==r?void 0:null===(t=r.followingIds)||void 0===t?void 0:t.length}),(0,l.jsx)("p",{className:"text-neutral-500",children:"Following"})]}),(0,l.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,l.jsx)("p",{className:"text-white",children:(null==r?void 0:r.followersCount)||0}),(0,l.jsx)("p",{className:"text-neutral-500",children:"Followers"})]})]})]})]})};var Z=s(5675),N=s.n(Z),g=s(9873);let k=e=>{let{userId:t}=e,{data:s}=(0,a.Z)(t);return(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"bg-neutral-700 h-44 relative",children:[(null==s?void 0:s.coverImage)&&(0,l.jsx)(N(),{src:s.coverImage,fill:!0,alt:"Cover Image",style:{objectFit:"cover"}}),(0,l.jsx)("div",{className:"absolute -bottom-16 left-4",children:(0,l.jsx)(g.Z,{userId:t,isLarge:!0,hasBorder:!0})})]})})},y=()=>{let e=(0,n.useRouter)(),{userId:t}=e.query,{data:s,isLoading:o}=(0,a.Z)(t);return o||!s?(0,l.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,l.jsx)(r.Z,{color:"lightblue",size:80})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.Z,{showBackArrow:!0,label:null==s?void 0:s.name}),(0,l.jsx)(k,{userId:t}),(0,l.jsx)(w,{userId:t}),(0,l.jsx)(i.Z,{userId:t})]})};var C=y}},function(e){e.O(0,[874,617,456,861,48,774,888,179],function(){return e(e.s=9508)}),_N_E=e.O()}]);
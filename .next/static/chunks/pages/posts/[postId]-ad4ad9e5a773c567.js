(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[475],{3282:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/[postId]",function(){return r(5824)}])},9873:function(e,t,r){"use strict";var n=r(5893),s=r(5675),a=r.n(s),l=r(1163),o=r(7294),i=r(1699);let c=e=>{let{userId:t,isLarge:r,hasBorder:s}=e,c=(0,l.useRouter)(),{data:d}=(0,i.Z)(t),u=(0,o.useCallback)(e=>{e.stopPropagation(),c.push("/users/".concat(t))},[c,t]);return(0,n.jsx)("div",{className:"\n        ".concat(s?"border-4 border-black":"","\n        ").concat(r?"h-32":"h-12","\n        ").concat(r?"w-32":"w-12","\n        rounded-full \n        hover:opacity-90 \n        transition \n        cursor-pointer\n        relative\n      "),children:(0,n.jsx)(a(),{fill:!0,style:{objectFit:"cover",borderRadius:"100%"},alt:"Avatar",onClick:u,src:(null==d?void 0:d.profileImage)||"/images/placeholder.png"})})};t.Z=c},8726:function(e,t,r){"use strict";var n=r(5893);let s=e=>{let{label:t,secondary:r,fullWidth:s,onClick:a,large:l,disabled:o,outline:i}=e;return(0,n.jsx)("button",{disabled:o,onClick:a,className:"\n        disabled:opacity-70\n        disabled:cursor-not-allowed\n        rounded-full\n        font-semibold\n        hover:opacity-80\n        transition\n        border-2\n        ".concat(s?"w-full":"w-fit","\n        ").concat(r?"bg-white":"bg-sky-500","\n        ").concat(r?"text-black":"text-white","\n        ").concat(r?"border-black":"border-sky-500","\n        ").concat(l?"text-xl":"text-md","\n        ").concat(l?"px-5":"px-4","\n        ").concat(l?"py-3":"py-2","\n        ").concat(i?"bg-transparent":"","\n        ").concat(i?"border-white":"","\n        ").concat(i?"text-white":"","\n      "),children:t})};t.Z=s},2899:function(e,t,r){"use strict";r.d(t,{Z:function(){return v}});var n=r(5893),s=r(6154),a=r(7294),l=r(6501),o=r(1524),i=r(4529);let c=(0,i.Ue)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})}));var d=r(1954),u=r(2402),p=r(4217),x=r(9873),m=r(8726);let h=e=>{let{placeholder:t,isComment:r,postId:i}=e,h=c(),v=(0,o.Z)(),{data:f}=(0,d.Z)(),{mutate:b}=(0,u.Z)(),{mutate:j}=(0,p.Z)(i),[w,g]=(0,a.useState)(""),[y,Z]=(0,a.useState)(!1),k=(0,a.useCallback)(async()=>{try{Z(!0),await s.Z.post(r?"/api/comments?postId=".concat(i):"/api/posts",{body:w}),l.Am.success("Tweet created"),g(""),b(),j()}catch(e){l.Am.error("Something went wrong")}finally{Z(!1)}},[w,b,r,i,j]);return(0,n.jsx)("div",{className:"border-b-[1px] border-neutral-800 px-5 py-2",children:f?(0,n.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,n.jsx)("div",{children:(0,n.jsx)(x.Z,{userId:null==f?void 0:f.id})}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("textarea",{disabled:y,onChange:e=>g(e.target.value),value:w,className:" disabled:opacity-80 peer resize-none  mt-3  w-full  bg-black  ring-0  outline-none  text-[20px]  placeholder-neutral-500  text-white ",placeholder:t}),(0,n.jsx)("hr",{className:" opacity-0  peer-focus:opacity-100  h-[1px]  w-full  border-neutral-800  transition"}),(0,n.jsx)("div",{className:"mt-4 flex flex-row justify-end",children:(0,n.jsx)(m.Z,{disabled:y||!w,onClick:k,label:"Tweet"})})]})]}):(0,n.jsxs)("div",{className:"py-8",children:[(0,n.jsx)("h1",{className:"text-white text-2xl text-center mb-4 font-bold",children:"Welcome to Twitter"}),(0,n.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[(0,n.jsx)(m.Z,{label:"Login",onClick:v.onOpen}),(0,n.jsx)(m.Z,{label:"Register",onClick:h.onOpen,secondary:!0})]})]})})};var v=h},9852:function(e,t,r){"use strict";var n=r(5893),s=r(1163),a=r(7294),l=r(7516);let o=e=>{let{showBackArrow:t,label:r}=e,o=(0,s.useRouter)(),i=(0,a.useCallback)(()=>{o.back()},[o]);return(0,n.jsx)("div",{className:"border-b-[1px] border-neutral-800 p-5",children:(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[t&&(0,n.jsx)(l.YiX,{onClick:i,color:"white",size:20,className:" cursor-pointer  hover:opacity-70  transition "}),(0,n.jsx)("h1",{className:"text-white text-xl font-semibold",children:r})]})})};t.Z=o},9410:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var n=r(5893),s=r(1163),a=r(7294),l=r(8193),o=r(6422),i=r(1524),c=r(1954),d=r(6154),u=r(6501),p=r(4217),x=r(2402);let m=e=>{let{postId:t,userId:r}=e,{data:n}=(0,c.Z)(),{data:s,mutate:l}=(0,p.Z)(t),{mutate:o}=(0,x.Z)(r),m=(0,i.Z)(),h=(0,a.useMemo)(()=>{let e=(null==s?void 0:s.likedIds)||[];return e.includes(null==n?void 0:n.id)},[s,n]),v=(0,a.useCallback)(async()=>{if(!n)return m.onOpen();try{await (h?()=>d.Z.delete("/api/like",{data:{postId:t}}):()=>d.Z.post("/api/like",{postId:t}))(),l(),o(),u.Am.success("Success")}catch(e){u.Am.error("Something went wrong")}},[n,h,t,o,l,m]);return{hasLiked:h,toggleLike:v}};var h=r(9873);let v=e=>{var t;let{data:r={},userId:d}=e,u=(0,s.useRouter)(),p=(0,i.Z)(),{data:x}=(0,c.Z)(),{hasLiked:v,toggleLike:f}=m({postId:r.id,userId:d}),b=(0,a.useCallback)(e=>{e.stopPropagation(),u.push("/users/".concat(r.user.id))},[u,r.user.id]),j=(0,a.useCallback)(()=>{u.push("/posts/".concat(r.id))},[u,r.id]),w=(0,a.useCallback)(async e=>{if(e.stopPropagation(),!x)return p.onOpen();f()},[p,x,f]),g=v?l.M_L:l.lo,y=(0,a.useMemo)(()=>(null==r?void 0:r.createdAt)?(0,o.Z)(new Date(r.createdAt)):null,[r.createdAt]);return(0,n.jsx)("div",{onClick:j,className:" border-b-[1px]  border-neutral-800  p-5  cursor-pointer  hover:bg-neutral-900  transition ",children:(0,n.jsxs)("div",{className:"flex flex-row items-start gap-3",children:[(0,n.jsx)(h.Z,{userId:r.user.id}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,n.jsx)("p",{onClick:b,className:" text-white  font-semibold  cursor-pointer  hover:underline ",children:r.user.name}),(0,n.jsxs)("span",{onClick:b,className:" text-neutral-500 cursor-pointer hover:underline hidden md:block ",children:["@",r.user.username]}),(0,n.jsx)("span",{className:"text-neutral-500 text-sm",children:y})]}),(0,n.jsx)("div",{className:"text-white mt-1",children:r.body}),(0,n.jsxs)("div",{className:"flex flex-row items-center mt-3 gap-10",children:[(0,n.jsxs)("div",{className:" flex  flex-row  items-center  text-neutral-500  gap-2  cursor-pointer  transition  hover:text-sky-500 ",children:[(0,n.jsx)(l.e$J,{size:20}),(0,n.jsx)("p",{children:(null===(t=r.comments)||void 0===t?void 0:t.length)||0})]}),(0,n.jsxs)("div",{onClick:w,className:" flex  flex-row  items-center  text-neutral-500  gap-2  cursor-pointer  transition  hover:text-red-500 ",children:[(0,n.jsx)(g,{color:v?"red":"",size:20}),(0,n.jsx)("p",{children:r.likedIds.length})]})]})]})]})})};var f=v},1954:function(e,t,r){"use strict";var n=r(9734),s=r(8698);let a=()=>{let{data:e,error:t,isLoading:r,mutate:a}=(0,n.ZP)("/api/current",s.Z);return{data:e,error:t,isLoading:r,mutate:a}};t.Z=a},1524:function(e,t,r){"use strict";var n=r(4529);let s=(0,n.Ue)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})}));t.Z=s},4217:function(e,t,r){"use strict";var n=r(9734),s=r(8698);let a=e=>{let{data:t,error:r,isLoading:a,mutate:l}=(0,n.ZP)(e?"/api/posts/".concat(e):null,s.Z);return{data:t,error:r,isLoading:a,mutate:l}};t.Z=a},2402:function(e,t,r){"use strict";var n=r(9734),s=r(8698);let a=e=>{let{data:t,error:r,isLoading:a,mutate:l}=(0,n.ZP)(e?"/api/posts?userId=".concat(e):"/api/posts",s.Z);return{data:t,error:r,isLoading:a,mutate:l}};t.Z=a},1699:function(e,t,r){"use strict";var n=r(9734),s=r(8698);let a=e=>{let{data:t,error:r,isLoading:a,mutate:l}=(0,n.ZP)(e?"/api/users/".concat(e):null,s.Z);return{data:t,error:r,isLoading:a,mutate:l}};t.Z=a},8698:function(e,t,r){"use strict";var n=r(6154);let s=e=>n.Z.get(e).then(e=>e.data);t.Z=s},5824:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=r(5893),s=r(1163),a=r(373),l=r(4217),o=r(9852),i=r(2899),c=r(9410),d=r(7294),u=r(6422),p=r(9873);let x=e=>{let{data:t={}}=e,r=(0,s.useRouter)(),a=(0,d.useCallback)(e=>{e.stopPropagation(),r.push("/users/".concat(t.user.id))},[r,t.user.id]),l=(0,d.useMemo)(()=>(null==t?void 0:t.createdAt)?(0,u.Z)(new Date(t.createdAt)):null,[t.createdAt]);return(0,n.jsx)("div",{className:" border-b-[1px]  border-neutral-800  p-5  cursor-pointer  hover:bg-neutral-900  transition ",children:(0,n.jsxs)("div",{className:"flex flex-row items-start gap-3",children:[(0,n.jsx)(p.Z,{userId:t.user.id}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,n.jsx)("p",{onClick:a,className:" text-white  font-semibold  cursor-pointer  hover:underline ",children:t.user.name}),(0,n.jsxs)("span",{onClick:a,className:" text-neutral-500 cursor-pointer hover:underline hidden md:block ",children:["@",t.user.username]}),(0,n.jsx)("span",{className:"text-neutral-500 text-sm",children:l})]}),(0,n.jsx)("div",{className:"text-white mt-1",children:t.body})]})]})})},m=e=>{let{comments:t=[]}=e;return(0,n.jsx)(n.Fragment,{children:t.map(e=>(0,n.jsx)(x,{data:e},e.id))})},h=()=>{let e=(0,s.useRouter)(),{postId:t}=e.query,{data:r,isLoading:d}=(0,l.Z)(t);return d||!r?(0,n.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,n.jsx)(a.Z,{color:"lightblue",size:80})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z,{showBackArrow:!0,label:"Tweet"}),(0,n.jsx)(c.Z,{data:r}),(0,n.jsx)(i.Z,{postId:t,isComment:!0,placeholder:"Tweet your reply"}),(0,n.jsx)(m,{comments:null==r?void 0:r.comments})]})};var v=h},373:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(7294),s={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function a(e){var t=function(e){if("number"==typeof e)return{value:e,unit:"px"};var t,r=(e.match(/^[0-9.]*/)||"").toString();t=r.includes(".")?parseFloat(r):parseInt(r,10);var n=(e.match(/[^0-9]*$/)||"").toString();return s[n]?{value:t,unit:n}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}(e);return"".concat(t.value).concat(t.unit)}var l=function(){return(l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)0>t.indexOf(n[s])&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r},i=function(e,t,r){var n="react-spinners-".concat(e,"-").concat(r);if("undefined"==typeof window||!window.document)return n;var s=document.createElement("style");document.head.appendChild(s);var a=s.sheet,l="\n    @keyframes ".concat(n," {\n      ").concat(t,"\n    }\n  ");return a&&a.insertRule(l,0),n}("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip"),c=function(e){var t=e.loading,r=e.color,s=void 0===r?"#000000":r,c=e.speedMultiplier,d=e.cssOverride,u=e.size,p=void 0===u?35:u,x=o(e,["loading","color","speedMultiplier","cssOverride","size"]),m=l({background:"transparent !important",width:a(p),height:a(p),borderRadius:"100%",border:"2px solid",borderTopColor:s,borderBottomColor:"transparent",borderLeftColor:s,borderRightColor:s,display:"inline-block",animation:"".concat(i," ").concat(.75/(void 0===c?1:c),"s 0s infinite linear"),animationFillMode:"both"},void 0===d?{}:d);return void 0===t||t?n.createElement("span",l({style:m},x)):null}}},function(e){e.O(0,[874,617,456,861,774,888,179],function(){return e(e.s=3282)}),_N_E=e.O()}]);